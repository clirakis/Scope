<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="utf-8">

   <title>CBL HTML page for THttpServer</title>

   <script src="/jsrootsys/scripts/JSRootCore.js" type="text/javascript"></script>
      <!-- JSROOT reference: -->
      <!-- https://root.cern.ch/root/htmldoc/guides/JSROOT/JSROOT.html -->
      <!-- https://root.cern/js/latest/api.htm -->
      <!-- if necessary, one can load any other scripts -->
      <!-- from THttpServer or any other source  -->
      <!-- <script src="/jsrootsys/scripts/jquery.min.js" -->
      <!-- type="text/javascript"></script> -->
      <!-- Specify a table. -->
      <!-- Create 2 boxes (hpx,hpxpy) of the specified dimensions -->
      <style>
	table, td {
          border: 1px solid black;
	}

	#draw_hpx , #draw_hpxpy {
          width:400px;
          height:400px;
	}
	#draw_Canvas1 {
	  width: 800px;
	  height:800px;
        }
      </style>
  </head>
  
  <body>
    <!-- Start of actual table -->
    <table>
      <tbody>
	<tr> <!-- Row 0 -->
	  <td style='text-align:center' colspan='2'>
	    <label> Head of Box </label>
	  </td>
	</tr>

	<tr> <!-- Draw row 1 in a table -->
	  <!-- Make the first button, align the text in the center. -->
	  <!-- td defines a cell in the table. -->
	  <td style='text-align:center'>
	    <!-- Here we define the actual button details. -->
	    <!-- input id defines the handle to the button -->
	    <!-- type defines what type it is -->
	    <!-- then the title of the button, like bubble help. -->
	    <!-- value is the label on the button. -->
	    <input id="btn_hpx" type="button" title="Read hpx from server" value="Read HPX"/>
	  </td>
	  
	  <td style='text-align:center'>
	    <input id="btn_hpxpy" type="button" title="Read hpxpy from server" value="Read HPXPY"/>
	      <input id="btn_canvas" type="button" title="Display canvas." value="Read Canvas1"/>
	  </td>
	</tr> 

	<tr> <!-- Start of Row 2 in table -->
	  <td><div id="draw_hpx"/></td>
	  <td><div id="draw_hpxpy"/></td>
	</tr>

	<tr> <!-- Start of Row 3 in table --> 
	  <td style='text-align:center' colspan='2'><div id="draw_Canvas1"/></td>
	<tr> <!-- Start of Row 4 in table -->
	  <!-- define cell spaning two columns and a center alignment.-->
	  <td style='text-align:center' colspan='2'>
            <input id="btn_all" type="button" title="Read all histograms from server" value="Read all"/>
	      <input id="btn_clear" type="button" title="Clear histograms drawing" value="Clear both"/>
	  </td>
	</tr>
      </tbody>
    </table>
    
    
    <!-- The above elements define what happens on the screen.  -->
    <!-- Think of this as the 'callback' for the buttons above. -->
    <script type='text/javascript'>
      <!-- within the document, get the handle and define what we -->
      <!-- are going to do, in this case on click, we define a    -->
      <!-- function. The function body is handled by JSROOT.      -->
      <!-- we address the hpx object and ask for a redraw.        -->
      document.getElementById('btn_hpx').onclick = function() {
         <!-- hpx is the text handle of the 1D histogram -->
         <!-- apparently the slash root.json is the method of -->
         <!-- executing this. -->
         <!-- object specifies a single rather than multiple object. -->
         <!-- The function body is calling for a redraw, -->
         <!-- not sure what the draw_hpx does. -->
         JSROOT.NewHttpRequest("hpx/root.json", 'object', function(obj) {
           JSROOT.redraw("draw_hpx", obj);
         }).send();
      }
      
      document.getElementById('btn_hpxpy').onclick = function() 
      {
          JSROOT.NewHttpRequest("hpxpy/root.json", 'object', 
              function(obj) 
              {
                 // Draw the pxpy object with the option <col>.
                 JSROOT.redraw("draw_hpxpy", obj, "col");
              }).send();
      }

      document.getElementById('btn_canvas').onclick = function() 
      {
          JSROOT.NewHttpRequest("hpxpy/root.json", 'object', 
              function(obj) 
              {
                 // Draw the canvas object
                 JSROOT.redraw("draw_Canvas1", obj);
              }).send();
      }
      
      // here both objects requested with signle multi.json request
      document.getElementById('btn_all').onclick = function() {
      JSROOT.NewHttpRequest("multi.json?number=3", 'multi', function(arr) {
            JSROOT.redraw("draw_hpx", arr[0]);
            JSROOT.redraw("draw_hpxpy", arr[1], "colz");
	    JSROOT.redraw("draw_Canvas1", arr[2]);
         }).send("hpx/root.json\nhpxpy/root.json\nCanvas1/root.json\n");
      }

      document.getElementById('btn_clear').onclick = function() 
	{
	  if (JSROOT.cleanup) 
          {
            JSROOT.cleanup("draw_hpx");
            JSROOT.cleanup("draw_hpxpy");
          } 
          else 
          {
            console.log('No drawing was perfromed - JSROOT.cleanup function not yet defined');
          }
        }
  </script>
</body>
</html>
